<div class="entire-entry-container">
  <% if (showLineBreak) { %>
    <hr>
  <% } %>
  
  <div class="polaroid randomRotation">
    <div class="entry-img-wrapper">
      <img src="<%= entryDetails.book_cover %>" alt="book cover for <%= entryDetails.title %>" />
    </div>

    <% if (showDatePublished) { %>
    <div class="entry-date">
      <p>
        Date Created: 
        <span> <% const formattedDate = new
        Date(entryDetails.date_created).toLocaleDateString(); %> <%= formattedDate %>
        </span>
      </p>
    </div>
    <% } %>

    <div class="entry-titleAuthor">
      <p>
        <span>
            <a href="<%= entryDetails.ol_link %>" target="_blank" rel="noopener noreferrer"
              ><%= entryDetails.title %></a
            >
        </span>
        <br>
          by <% if (entryDetails.author) { %> <%= entryDetails.author %> <% } else { %>
            <em>No Author yet. Please update.</em>
            <% } %>
      </p>
    </div>
  </div>

  <div class="entry-content-container">
    <div class="entry-rating">
      <p>
        <% if (entryDetails.rating) { %> 
          <h2> Rating </h2>
          <br>
          <div>
            <%= entryDetails.rating %> 
            <hr>
            5 
          </div>
        <% } else { %>
          No rating yet. Fill form below. 
        <% } %>
      </p>
    </div>
    <div class="entry-review">
      <p>
        <% if (entryDetails.review) { %> 
          <h2> Review </h2>
          <br>
          <%#= entryDetails.review %> 
          <% var preview = (entryDetails.review).substring(0, 257) %>
          <%= preview %>
          <br>
           <a href="/view/<%= entryDetails.review_id %>"><span class="material-icons-round">read_more</span></a>
        <% } else { %> 
          No review yet. Fill form below. 
        <% } %>
      </p>
    </div>

    <% if (showButtons) { %>
    <div class="entry-buttons">
      <a href="/edit/<%= entryDetails.review_id %>"><span class="material-icons-round">edit</span></a>
      <form method="POST">
        <a
          href="/delete/<%= entryDetails.review_id %>"
          onclick="return confirm('Are you sure you want to delete this entry?')"
          >
          <span class="material-icons-round">delete</span>
          </a
        >
      </form>
    </div>
    <% } %>
    </div>

      <% if (showForm) { %> 
        
        <% if (showEditForm) { %>
      <form action="/edit-entry/<%= entryDetails.review_id %>" method="POST">
        <input type="hidden" name="isbn" value="<%= entryDetails.book_isbn %>" />
        <% } %>

         <% if (showPostForm) { %>
      <form action="/post-new-entry" method="POST">
        <!-- NOTE: JSON.stringify(book) was not working and resorted to approach below: -->
        <input type="hidden" name="bookTitle" value="<%= entryDetails.title %>" />
        <input type="hidden" name="bookCover" value="<%= entryDetails.book_cover %>" />
        <input type="hidden" name="bookISBN" value="<%= entryDetails.isbn %>" />
        <input type="hidden" name="bookOLlink" value="<%= entryDetails.ol_link %>" />
         <% } %>

        <div class="entry-input-author">
          <p>Author:</p>
          <input
             type="text"
             name="author"
             placeholder="Author"
             value="<%= entryDetails.author %>"
             required
          />
        </div>

        <div class="entry-input-rating">
           <p>Rating:</p>
           <% for (let i = 0; i < 6; i++) { %> <input id="<%= i %>" type="radio"
           name="rating" value="<%= i %>" required <%= entryDetails.rating == i ?
           "checked" : "" %> />
           <!-- entryDetails.rating == i ? "checked" : ""  <--  So that the user can see which rating was originally selected  -->
           <label for="<%= i %>"><%= i %></label>
           <% } %>
        </div>

        <div class="entry-input-review">
           <p>Review:</p>
           <textarea
             name="review"
             placeholder="Write your review here..."
             required
           >
   <%= entryDetails.review %></textarea
           >
        </div>

        <div>
          <a href="/">Cancel</a>
          <input type="submit" value="Submit" />
        </div>
      </form>
      <% } %>
  </div>
</div>