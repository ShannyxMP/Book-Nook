<%- include("partials/header.ejs") %>

<div class="stats">
  <p>
    Books reviewed this
    <br>
    YEAR | TOTAL : 
  </p>
  <div>
    <p>
      <span><%= bookCountYear %></span> |
      <span><%= bookCountTotal %></span>
    </p>
  </div>
  </div>

<main>
  <div class="entries-flex">
    <div>
      <a href="/add-entry">Add New Entry <span class="material-icons-round">add</span></a>
    </div>

    <div>
      <form action="/sort" method="POST">
        <label for="sortBy">Sort by:</label>
        <select name="sortBy" id="sortBy" onclick="submitIfOptionChosen(this)">
          <option value="" disabled selected>Select sorting</option>
          <option value="reviews.date_created DESC">Newest</option>
          <option value="reviews.date_created ASC">Oldest</option>
          <option value="books.title ASC">Title (A-Z)</option>
          <option value="books.title DESC">Title (Z-A)</option>
        </select>
      </form>
    </div>

    <% for (let entry of listOfEntries) { %>
      <%- include("partials/entry.ejs", { 
        entryDetails: entry, 
        // Conditionals:
        showDatePublished: true, 
        showButtons: true, 
        showForm: false, 
        showEditForm: false, 
        showPostForm: false 
      }) %> 
    <% } %>
  </div>
</main>

<%- include("partials/footer.ejs", { yearNow: year }) %>
